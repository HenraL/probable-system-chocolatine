##
## EPITECH PROJECT, 2021
## chocolatine - what_time_is_it.yml
## File description:
## jitter jitter
##

name: What time is it
on: [push]
jobs:
  build:
      name: Example
      runs-on: ubuntu-latest
      steps:
        - name: Get current date
          id: dote
          run: |
            echo "::set-output name=date::$(date +'%Y-%m-%d')"
        - name: getting the time
          id: me_time
          run: echo "::set-output name=moo_time::$(date +'%H-%M-%S-%N')"

        - name: Test with environment variables
          # run: |
          #   echo $TAG_NAME - $RELEASE_NAME
          #   echo "TAG_NAME is '$TAG_NAME'"
          #   echo "RELEASE_NAME is '$RELEASE_NAME'"
          #   echo "CURRENT_TIME is '$CURRENT_TIME'"
          #   echo "CURRENT_USERNAME is '$CURRENT_USERNAME'"
          env:
            TAG_NAME: "The_date_is: ${{ steps.dote.outputs.date }}"
            RELEASE_NAME: "The_Date_Is: ${{ steps.dote.outputs.date }}"
            CURRENT_TIME: "The_time_is: ${{ steps.me_time.outputs.moo_time }}"
            CURRENT_USERNAME: 'Mona_the_Octocat'
          id: my_env_env
          run: |
            echo "::set-output name=tag_name::$(TAG_NAME)"
            echo "::set-output name=release_name::$(RELEASE_NAME)"
            echo "::set-output name=current_time::$(CURRENT_TIME)"
            echo "::set-output name=current_username::$(CURRENT_USERNAME)"
            echo "steps.my_env_env.tag_name is '${{ steps.my_env_env.tag_name }}'"
            echo "steps.my_env_env.release_name is '${{ steps.my_env_env.release_name }}'"
            echo "steps.my_env_env.current_time is '${{ steps.my_env_env.current_time }}'"
            echo "steps.my_env_env.current_username is '${{ steps.my_env_env.current_username }}'"

        - name: output environement variables v1
          run: |
            echo "TAG_NAME is '$TAG_NAME'"
            echo "RELEASE_NAME is '$RELEASE_NAME'"
            echo "CURRENT_TIME is '$CURRENT_TIME'"
            echo "CURRENT_USERNAME is '$CURRENT_USERNAME'"
        - name: Output structure my_env_env content
          run: |
            echo "steps.my_env_env.tag_name is '${steps.my_env_env.tag_name}'"
            echo "steps.my_env_env.release_name is '${steps.my_env_env.release_name}'"
            echo "steps.my_env_env.current_time is '${steps.my_env_env.current_time}'"
            echo "steps.my_env_env.current_username is '${steps.my_env_env.current_username}'"
        - name: Put the vars in structure my_env
          id: my_env
          run: |
            echo "::set-output name=tag_name::$TAG_NAME"
            echo "::set-output name=release_name::$RELEASE_NAME"
            echo "::set-output name=current_time::$CURRENT_TIME"
            echo "::set-output name=current_username::$CURRENT_USERNAME"
        - name: Output structure my_env content
          run: |
            echo "steps.my_env.tag_name is '${steps.my_env.tag_name}'"
            echo "steps.my_env.release_name is '${steps.my_env.release_name}'"
            echo "steps.my_env.current_time is '${steps.my_env.current_time}'"
            echo "steps.my_env.current_username is '${steps.my_env.current_username}'"

        - name: Test with input
          uses: actions/hello-world-docker-action@master
          with:
            who-to-greet: "${{ steps.my_env.current_username }}-${{ steps.dote.outputs.date }}"
        # - name: Test time output
        #   uses: actions/hello-world-docker-action@master
        #   with:
        #     who-to-greet: $CURRENT_USERNAME-${{ steps.date.outputs.my_time }}
